%section
  .row
    .span16
      - unless signed_in?
        %h3 Sign in first to explore the provider's API
        %p= link_to "Sign in with OAuth 2 provider", user_omniauth_authorize_path(:btcjam), :class => "btn primary"
      - else
        %h2 BTCJam API demo
        .well
          -if signed_in?
            %p
              You are logged in as:
              %ul
                %li User ID: <strong>#{current_user.btcjam_uid}</strong>
                %li Alias: <strong>#{current_user.oauth_info("alias")}</strong>
                %li BTCJam score: <strong>#{current_user.oauth_info("btcjam_score")}</strong>
                %li Positive ratings received: <strong>#{current_user.oauth_info("positive_count_reputation")}</strong>
                %li Identity verified: <strong>#{current_user.oauth_info("identity_verified")}</strong>
                %li Address verified: <strong>#{current_user.oauth_info("address_verified")}</strong>
          %p
            = link_to "User Information", authenticated_calls_path(:me, :format => :json), :class => "btn", "data-explore" => []
            = link_to "Query Open Listings", open_calls_path(:listings, :format => :json), :class => "btn", "data-explore" => []
            = link_to "Sign out", destroy_user_session_path, :class => "btn primary"


        %p
          %pre#display-json
            Select one of the api methods above

